<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Russian ‚Üí Ancient Greek Reading Trainer</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
      max-width: 1000px;
      margin: auto;
    }
    h1 {
      font-size: 1.5em;
      margin-bottom: 10px;
    }
    .controls {
      display: flex;
      gap: 10px;
      align-items: center;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    .dual-column {
      display: flex;
      gap: 20px;
    }
    textarea, .output {
      width: 100%;
      height: 400px;
      font-size: 1em;
      padding: 10px;
      box-sizing: border-box;
    }
    .output {
      border: 1px solid #ccc;
      overflow-y: auto;
      white-space: pre-wrap;
    }
    .output span {
      position: relative;
      cursor: help;
    }
    .output span:hover::before {
      content: attr(data-original);
      position: absolute;
      background: #eee;
      padding: 2px 5px;
      border: 1px solid #ccc;
      border-radius: 5px;
      top: -1.5em;
      left: 0;
      white-space: nowrap;
      z-index: 10;
      font-size: 0.85em;
      color: #000;
    }
    .highlight {
      background-color: #ffe08a;
    }
    .half {
      width: 50%;
    }
  </style>
</head>
<body>
  <h1>Russian ‚Üí Ancient Greek Reading Trainer</h1>

  <div class="controls">
    <label>–°—Ç–µ–ø–µ–Ω—å –∑–∞–º–µ–Ω—ã:
  <input type="number" id="intensity" value="100" min="0" max="100" step="10" style="width: 60px;" oninput="transformText()">
  %
</label>
    <button onclick="toggleHighlight()">–ü–æ–¥—Å–≤–µ—Ç–∫–∞</button>
    <button onclick="resetText()">‚Üª</button>
    <button onclick="copyOutput()">üìã</button>
  </div>

  <div class="dual-column">
    <textarea id="inputText" class="half" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –Ω–∞ —Ä—É—Å—Å–∫–æ–º:" oninput="originalText=''; transformText()">https://bible.by/desp/41/1/
–û—Ç –ú–∞—Ä–∫–∞, –≥–ª–∞–≤–∞ 1, –ø–µ—Ä–µ–≤–æ–¥ –î–µ—Å–Ω–∏—Ü–∫–æ–≥–æ: 
 
1 –ù–∞—á–∞–ª–æ –ï–≤–∞–Ω–≥–µ–ª–∏—è –ò–∏—Å—É—Å–∞ –•—Ä–∏—Å—Ç–∞, –°—ã–Ω–∞ –ë–æ–∂—å–µ–≥–æ.
2 –¢–∞–∫ –Ω–∞–ø–∏—Å–∞–Ω–æ —É –ø—Ä–æ—Ä–æ–∫–∞ –ò—Å–∞–π–∏: ¬´–í–æ—Ç, –ø–æ—Å—ã–ª–∞—é –≤–ø–µ—Ä–µ–¥–∏ –¢–µ–±—è –≤–µ—Å—Ç–Ω–∏–∫–∞ –ú–æ–µ–≥–æ, —á—Ç–æ–±—ã –æ–Ω –ø—Ä–æ–ª–æ–∂–∏–ª –ø–µ—Ä–µ–¥ –¢–æ–±–æ–π –¥–æ—Ä–æ–≥—É.
3 –ì–æ–ª–æ—Å –≤–∑—ã–≤–∞–µ—Ç –≤ –ø—É—Å—Ç—ã–Ω–µ: –ø—Ä–∏–≥–æ—Ç–æ–≤—å—Ç–µ –ì–æ—Å–ø–æ–¥—É –¥–æ—Ä–æ–≥—É, —Ä–∞—Å–ø—Ä—è–º–∏—Ç–µ –ø—É—Ç–∏ –¥–ª—è –ù–µ–≥–æ!¬ª
4 –ò–æ–∞–Ω–Ω —Ç–æ–≥–¥–∞ —Å—Ç–∞–ª –∫—Ä–µ—Å—Ç–∏—Ç—å –≤ –ø—É—Å—Ç—ã–Ω–µ. –û–Ω –ø—Ä–æ–ø–æ–≤–µ–¥–æ–≤–∞–ª –∫—Ä–µ—â–µ–Ω–∏–µ –∫–∞–∫ –æ–±—Ä—è–¥ –ø–æ–∫–∞—è–Ω–∏—è: –≤ –Ω–µ–º –ø—Ä–æ—â–∞–ª–∏—Å—å –≥—Ä–µ—Ö–∏.
5 –ò –∫ –Ω–µ–º—É —Å–æ–±–∏—Ä–∞–ª–∏—Å—å —Å–æ –≤—Å–µ–π —Å—Ç—Ä–∞–Ω—ã –ò—É–¥–µ–π—Å–∫–æ–π, –≤—Å–µ –∂–∏—Ç–µ–ª–∏ –ò–µ—Ä—É—Å–∞–ª–∏–º–∞: –∏—Å–ø–æ–≤–µ–¥—É—è —Å–≤–æ–∏ –≥—Ä–µ—Ö–∏, –æ–Ω–∏ –ø—Ä–∏–Ω–∏–º–∞–ª–∏ –æ—Ç –Ω–µ–≥–æ –∫—Ä–µ—â–µ–Ω–∏–µ –≤ —Ä–µ–∫–µ –ò–æ—Ä–¥–∞–Ω–µ.
6 –°–∞–º –ò–æ–∞–Ω–Ω –Ω–æ—Å–∏–ª –≤–µ—Ä–±–ª—é–∂—å—é —à–µ—Ä—Å—Ç—å, –æ–ø–æ—è—Å—ã–≤–∞–ª—Å—è –∫–æ–∂–∞–Ω—ã–º –ø–æ—è—Å–æ–º, –∞ –µ–ª —Å–∞—Ä–∞–Ω—á—É –∏ –¥–∏–∫–∏–π –º–µ–¥.
7 –û–Ω –ø—Ä–æ–ø–æ–≤–µ–¥–æ–≤–∞–ª —Ç–∞–∫:
‚Äî –ó–∞ –º–Ω–æ–π –≥—Ä—è–¥–µ—Ç –¢–æ—Ç, –ö—Ç–æ –º–µ–Ω—è —Å–∏–ª—å–Ω–µ–π! –ù–∞–≥–Ω—É—Ç—å—Å—è –∏ —Ä–∞–∑–≤—è–∑–∞—Ç—å —Ä–µ–º–µ—à–æ–∫ –Ω–∞ –µ–≥–æ —Å–∞–Ω–¥–∞–ª–∏—è—Ö ‚Äî —è –∏ —Ç–æ–≥–æ –Ω–µ–¥–æ—Å—Ç–æ–∏–Ω!
8 –Ø –≤–∞—Å –∫—Ä–µ—Å—Ç–∏–ª, –æ–º—ã–≤–∞—è –≤–æ–¥–æ–π, –∞ –û–Ω –æ–º–æ–µ—Ç –°–≤—è—Ç—ã–º –î—É—Ö–æ–º.
9 –ò –∫–∞–∫ —Ä–∞–∑ –≤ —Ç–µ –¥–Ω–∏ –ø—Ä–∏—à–µ–ª –ò–∏—Å—É—Å –∏–∑ –ù–∞–∑–∞—Ä–µ—Ç–∞, —á—Ç–æ –≤ –ì–∞–ª–∏–ª–µ–µ, –∏ –ø—Ä–∏–Ω—è–ª –æ—Ç –ò–æ–∞–Ω–Ω–∞ –∫—Ä–µ—â–µ–Ω–∏–µ –≤ –ò–æ—Ä–¥–∞–Ω–µ.
10 –ò —Å—Ä–∞–∑—É, –∫–æ–≥–¥–∞ –û–Ω –≤—ã—Ö–æ–¥–∏–ª –∏–∑ –≤–æ–¥—ã, —É–≤–∏–¥–µ–ª, –∫–∞–∫ —Ä–∞–∑–¥–µ–ª–∏–ª–∏—Å—å –Ω–µ–±–µ—Å–∞ –∏ —Å–æ—à–µ–ª –Ω–∞ –ù–µ–≥–æ –î—É—Ö, —Å–ª–æ–≤–Ω–æ –≥–æ–ª—É–±—å —Å–ª–µ—Ç–µ–ª.
11 –ò —Ä–∞–∑–¥–∞–ª—Å—è —Å –Ω–µ–±–µ—Å –≥–æ–ª–æ—Å:
‚Äî –¢—ã ‚Äî –ú–æ–π –≤–æ–∑–ª—é–±–ª–µ–Ω–Ω—ã–π –°—ã–Ω, —Å –¢–æ–±–æ–π –ú–æ–µ –±–ª–∞–≥–æ–≤–æ–ª–µ–Ω–∏–µ.
12 –ò —Å—Ä–∞–∑—É –∂–µ –î—É—Ö –ø–æ–≤–µ–ª –ï–≥–æ –≤ –ø—É—Å—Ç—ã–Ω—é.
</textarea>
    <div class="output half" id="output" aria-label="–î—Ä–µ–≤–Ω–µ–≥—Ä–µ—á–µ—Å–∫–æ–µ —á—Ç–µ–Ω–∏–µ:"></div>
  </div>

  <script>
    let originalText = '';
    let highlight = true;

    const substitutions = [
      { ru: "—Ñ", gr: "œÜ" },
      { ru: "—Ç", gr: "œÑ" },
      { ru: "–ø", gr: "œÄ" },
      { ru: "–∑", gr: "Œ∂" },
      { ru: "–≥(?=[–µ–∏])", gr: "Œ≥", regex: true },
      { ru: "–≥", gr: "Œ≥" },
      { ru: "—Ö", gr: "œá" },
      { ru: "–≤", gr: "Œ≤" },
      { ru: "–¥", gr: "Œ¥" },
      { ru: "–∫", gr: "Œ∫" },
      { ru: "–ª", gr: "Œª" },
      { ru: "–º", gr: "Œº" },
      { ru: "–Ω", gr: "ŒΩ" },
      { ru: "—Ä", gr: "œÅ" },
      { ru: "—Å", gr: "œÉ" },
      { ru: "—É", gr: "œÖ" },
      { ru: "–∞", gr: "Œ±" },
      { ru: "–µ", gr: "Œµ" },
      { ru: "–∏", gr: "Œπ" },
      { ru: "–æ", gr: "Œø" },
      { ru: "—ç", gr: "Œ∑" },
      { ru: "—è", gr: "ŒπŒ±" },
      { ru: "—é", gr: "ŒπœÖ" },
      { ru: "–π", gr: "Œπ" },
      { ru: "—ë", gr: "ŒπŒø" },
      { ru: "–∫—Å", gr: "Œæ" },
      { ru: "–ø—Å", gr: "œà" },
      { ru: "—Ç—Ö", gr: "Œ∏" },
      { ru: "–¥–∂", gr: "œÑŒ∂" },
      { ru: "–π–æ", gr: "ŒπŒø" },
      { ru: "–∏—è–Ω", gr: "ŒπŒ±ŒΩ" },
      { ru: "–∏—è", gr: "ŒπŒ±" },
      { ru: "ai", gr: "Œ±Œπ" },
      { ru: "ei", gr: "ŒµŒπ" },
      { ru: "oi", gr: "ŒøŒπ" },
      { ru: "ou", gr: "ŒøœÖ" },
      { ru: "eu", gr: "ŒµœÖ" },
      { ru: "au", gr: "Œ±œÖ" }
    ];

    substitutions.sort((a, b) => b.ru.length - a.ru.length);

    function transformText() {
      const inputElem = document.getElementById("inputText");
      const intensityElem = document.getElementById("intensity");
      if (!intensityElem) return;
      const percent = parseInt(intensityElem.value);
      if (!originalText) originalText = inputElem.value;
      const input = inputElem.value;

      let result = '';
      let index = 0;

      while (index < input.length) {
        let matched = false;

        for (let rule of substitutions) {
          let part = input.slice(index);
          let match;

          if (rule.regex) {
            const regex = new RegExp('^' + rule.ru, 'i');
            match = regex.exec(part);
          } else {
            if (part.toLowerCase().startsWith(rule.ru)) {
              match = [part.slice(0, rule.ru.length)];
            }
          }

          if (match) {
            const original = match[0];
            const isUpper = original[0] === original[0].toUpperCase();
            const isAllUpper = original.toUpperCase() === original;
            const replacement = isAllUpper
              ? rule.gr.toUpperCase()
              : isUpper ? rule.gr[0].toUpperCase() + rule.gr.slice(1) : rule.gr;

            const useReplacement = Math.random() * 100 <= percent;

            if (useReplacement) {
              result += highlight ? `<span data-original="${original}" class="highlight">${replacement}</span>` : `<span data-original="${original}">${replacement}</span>`;
            } else {
              result += original;
            }

            index += original.length;
            matched = true;
            break;
          }
        }

        if (!matched) {
          result += input[index];
          index++;
        }
      }

      document.getElementById("output").innerHTML = result;
    }

    function toggleHighlight() {
      highlight = !highlight;
      transformText();
    }

    function adjustIntensity(delta) {
      const input = document.getElementById("intensity");
      if (!input) return;
      let value = Math.round(parseInt(input.value) / 10) * 10 + delta;
      if (value > 100) value = 100;
      if (value < 1) value = 1;
      input.value = value;
      transformText();
    }

    function resetText() {
  document.getElementById("inputText").value = originalText;
  transformText();
}

    function copyOutput() {
      const output = document.getElementById("output");
      const temp = document.createElement("textarea");
      temp.value = output.innerText;
      document.body.appendChild(temp);
      temp.select();
      document.execCommand("copy");
      document.body.removeChild(temp);
      alert("–†–µ–∑—É–ª—å—Ç–∞—Ç —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!");
    }
  </script>
</body>
</html>
